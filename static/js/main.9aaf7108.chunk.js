(this.webpackJsonptest_task=this.webpackJsonptest_task||[]).push([[0],{235:function(e,t,n){},237:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(37),s=n.n(c),i=n(27),o=n(22),u=n(9),p=n.n(u),l=n(21),j=n(34),h=n(6),d=function(e){return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"Nav",children:[Object(h.jsx)("h1",{children:"Home"}),sessionStorage.getItem("token")?Object(h.jsxs)("div",{className:"User__block",children:[Object(h.jsx)("span",{children:e.name}),Object(h.jsx)("button",{className:"LogOut",onClick:function(){e.fetchPosts(),e.history.push("/login"),sessionStorage.clear()},children:"Log Out"})]}):Object(h.jsxs)("div",{children:[Object(h.jsx)(i.b,{className:"Link",to:"/login",children:"Login"}),Object(h.jsx)(i.b,{className:"Link",to:"/reg",children:"Reg"})]})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Posts:"}),sessionStorage.getItem("token")?Object(h.jsx)("div",{children:Object(h.jsx)(i.b,{className:"Link",to:"/add",children:"Add a post"})}):console.log()]})]})},b=n(241),f=function(e){function t(e,t,n){if(t===n)return Object(h.jsx)("div",{children:Object(h.jsx)(i.b,{to:"/edit/"+e,children:"Edit"})})}return Object(h.jsx)(b.b,{bordered:!0,dataSource:e.posts,renderItem:function(n){return Object(h.jsxs)(b.b.Item,{children:[n.text,t(n.id,n.user_id,e.id)]})}})},O=n(126),x=n(127),m=n(64),v=n.n(m),y=function(){function e(){Object(O.a)(this,e)}return Object(x.a)(e,null,[{key:"about",value:function(){var e=Object(l.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://test.flcd.ru/api/user/self",{method:"GET",headers:{accept:"*/*",Authorization:"Bearer "+t,"X-CSRF-TOKEN":""}});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=Object(l.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("http://test.flcd.ru/api/post");case 2:return t=e.sent,e.abrupt("return",t.data.reverse());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getOne",value:function(){var e=Object(l.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("http://test.flcd.ru/api/post/"+t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"Edit",value:function(){var e=Object(l.a)(p.a.mark((function e(t,n,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://test.flcd.ru/api/post/"+t,{method:"PATCH",headers:{accept:"*/*",Authorization:"Bearer "+r,"Content-Type":"application/json","X-CSRF-TOKEN":""},body:JSON.stringify({text:n})});case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"Add",value:function(){var e=Object(l.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://test.flcd.ru/api/post/",{method:"POST",headers:{accept:"*/*",Authorization:"Bearer "+n,"Content-Type":"application/json","X-CSRF-TOKEN":""},body:JSON.stringify({text:t})});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Del",value:function(){var e=Object(l.a)(p.a.mark((function e(t,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://test.flcd.ru/api/post/"+t,{method:"DELETE",headers:{accept:"*/*",Authorization:"Bearer "+n,"X-CSRF-TOKEN":""}});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Login",value:function(){var e=Object(l.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("http://test.flcd.ru/api/token",{email:t,password:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Reg",value:function(){var e=Object(l.a)(p.a.mark((function e(t,n,r,a){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("http://test.flcd.ru/api/register",{name:t,email:n,password:r,password_confirmation:a});case 3:return c=e.sent,e.abrupt("return",c.data);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r,a){return e.apply(this,arguments)}}()}]),e}(),g=function(e){var t=Object(r.useState)([]),n=Object(j.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)([]),i=Object(j.a)(s,2),o=i[0],u=i[1];function b(){return O.apply(this,arguments)}function O(){return O=Object(l.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.getAll();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}function x(){return(x=Object(l.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.about(sessionStorage.getItem("token"));case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){b(),function(){x.apply(this,arguments)}()}),[]),Object(h.jsxs)("div",{children:[Object(h.jsx)(d,{name:o.name,history:e.history,fetchPosts:b}),Object(h.jsx)(f,{posts:a,id:o.id})]})},w=n(23),k=n(240),S=n(242),C=n(131),E=function(e){var t=Object(r.useState)([]),n=Object(j.a)(t,2),a=n[0],c=n[1];function s(){return(s=Object(l.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.Add(a.text,sessionStorage.getItem("token"));case 2:e.history.push("/");case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Create a post"}),Object(h.jsxs)(k.a,{children:[Object(h.jsx)(S.a,{placeholder:"Post text...",value:a.text,onChange:function(e){return c(Object(w.a)(Object(w.a)({},a),{},{text:e.target.value}))}}),Object(h.jsx)(C.a,{type:"primary",htmlType:"submit",onClick:function(){return s.apply(this,arguments)},children:"Post"}),Object(h.jsx)(i.b,{to:"/",children:"Cancel"})]})]})},N=function(e){var t=Object(r.useState)([]),n=Object(j.a)(t,2),a=n[0],c=n[1];function s(){return s=Object(l.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.location.href.match(/\d*$/)[0],e.next=3,y.getOne(t);case 3:n=e.sent,c(n);case 5:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function o(){return(o=Object(l.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.location.href.match(/\d*$/)[0],t.next=3,y.Edit(n,a.text,sessionStorage.getItem("token"));case 3:e.history.push("/");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function u(){return(u=Object(l.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=window.location.href.match(/\d*$/)[0],t.next=3,y.Del(n,sessionStorage.getItem("token"));case 3:e.history.push("/");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(r.useEffect)((function(){!function(){s.apply(this,arguments)}()}),[]),Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Edit a post"}),Object(h.jsxs)(k.a,{children:[Object(h.jsx)(S.a,{placeholder:"Post text...",value:a.text,onChange:function(e){return c(Object(w.a)(Object(w.a)({},a),{},{text:e.target.value}))}}),Object(h.jsx)(C.a,{type:"primary",htmlType:"submit",onClick:function(){return o.apply(this,arguments)},children:"Post"}),Object(h.jsx)(C.a,{onClick:function(){return u.apply(this,arguments)},children:"Delete"}),Object(h.jsx)(i.b,{to:"/",children:"Cancel"})]})]})},T=function(e){var t=Object(r.useState)(""),n=Object(j.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)([{name:"",email:"",pswd:"",pswd_cf:""}]),o=Object(j.a)(s,2),u=o[0],d=o[1];function b(){return(b=Object(l.a)(p.a.mark((function t(){var n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.Reg(u.name,u.email,u.pswd,u.pswd_cf);case 2:(n=t.sent)?(sessionStorage.setItem("token",n.token),sessionStorage.setItem("email",u.email),e.history.push("/")):c("Error");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Registration"}),Object(h.jsx)("h2",{className:"Error",children:a}),Object(h.jsxs)(k.a,{children:[Object(h.jsx)(S.a,{placeholder:"Name",type:"text",value:u.name,onChange:function(e){return d(Object(w.a)(Object(w.a)({},u),{},{name:e.target.value}))}}),Object(h.jsx)(S.a,{placeholder:"Email",type:"text",value:u.email,onChange:function(e){return d(Object(w.a)(Object(w.a)({},u),{},{email:e.target.value}))}}),Object(h.jsx)(S.a,{placeholder:"Password",type:"password",value:u.pswd,onChange:function(e){return d(Object(w.a)(Object(w.a)({},u),{},{pswd:e.target.value}))}}),Object(h.jsx)(S.a,{placeholder:"Password again",type:"password",value:u.pswd_cf,onChange:function(e){return d(Object(w.a)(Object(w.a)({},u),{},{pswd_cf:e.target.value}))}}),Object(h.jsx)(C.a,{type:"primary",htmlType:"submit",onClick:function(){return b.apply(this,arguments)},children:"Register"}),Object(h.jsx)(i.b,{to:"/",children:"Cancel"})]})]})},I=function(e){var t=Object(r.useState)([{email:"",pswd:""}]),n=Object(j.a)(t,2),a=n[0],c=n[1],s=function(){var t=Object(l.a)(p.a.mark((function t(n){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,y.Login(a.email,a.pswd);case 3:r=t.sent,sessionStorage.setItem("token",r.token),sessionStorage.setItem("email",a.email),e.history.push("/");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:"Login"}),Object(h.jsxs)(k.a,{children:[Object(h.jsx)(S.a,{placeholder:"Email",type:"text",value:a.email,onChange:function(e){return c(Object(w.a)(Object(w.a)({},a),{},{email:e.target.value}))}}),Object(h.jsx)(S.a,{placeholder:"Password",type:"password",value:a.pswd,onChange:function(e){return c(Object(w.a)(Object(w.a)({},a),{},{pswd:e.target.value}))}}),Object(h.jsx)(C.a,{type:"primary",htmlType:"submit",onClick:s,children:"Login"}),Object(h.jsx)(i.b,{to:"/",children:"Cancel"})]})]})};n(235);var P=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsxs)(i.a,{children:[Object(h.jsx)(o.a,{exact:!0,path:"/add",component:E}),Object(h.jsx)(o.a,{exact:!0,path:"/edit/:id",component:N}),Object(h.jsxs)(o.c,{children:[Object(h.jsx)(o.a,{exact:!0,path:"/",component:g}),Object(h.jsx)(o.a,{exact:!0,path:"/login",component:I}),Object(h.jsx)(o.a,{exact:!0,path:"/reg",component:T})]})]})})};n(236);s.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(P,{})}),document.getElementById("root"))}},[[237,1,2]]]);
//# sourceMappingURL=main.9aaf7108.chunk.js.map